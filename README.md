## Предисловие
Когда я приобрел свой первый макбук я задался вопросом о безопасности данных на моем устройстве от третьих лиц. В современном мире сторонние программы не вызывают доверия для хранения личных данных, поэтому я решил написать программу которая будет позволять шифровать и дешифровать выбранные данные на компьютере. 
Буду благодарен за поддержку и помощь в развитии проекта.
## Введение
Данная документация представляет собой инструкцию по установке и использованию программы позволяющий шифровать и дешифровать файлы и директории, в зависимости от их состояния.
## Инструкция
### Установка
1. Откройте терминал  и перейдите в директорию: 
```
cd /usr/local/bin
```
>Это нужно для того, чтобы программа работала, вне зависимости от директории в которой вы находитесь.

2. Находясь в папке `bin` создаем пустой файл.
```
sudo vi encryption.sh 
```
В ней и будет находится наша программа.

3. Копируем код из файла ```encryption.sh``` в созданный ранее файл.
```
#!/bin/bash
# Проверка количества переданных аргументов
if [ $# -eq 0 ]; then
	echo "Использование: $0 <filename>"
	exit 1
fi
input_file="$1"
output_file=""
if [[ "$input_file" == *.data ]]; then
	echo "Файл $input_file имеет расширение .data, дешифрование и разархивирование..."
	output_file="${input_file%.data}"
	openssl enc -d -aes-256-cbc -in "$input_file" -out "$output_file"
	if [ $? -eq 0 ]; then
		echo "Архив $input_file успешно дешифрован."
		rm "$input_file"
		if [[ "$output_file" == *.*.zip ]]; then
			unzip "$output_file"
		else
			unzip -j "$output_file" -d "${output_file%.zip}"
		fi
		if [ $? -eq 0 ]; then
			echo "Файл $output_file успешно разархивирован."
			rm "$output_file"
		else
			echo "Ошибка при разархивировании файла $output_file.zip."
			exit 1
		fi
	else
		echo "Ошибка при дешифровании архива $input_file."
		exit 1
	fi
else
	echo "Файл $input_file не имеет расширение .data, создание архива ZIP и шифрование..."
	output_file="${input_file}.zip"
	zip -r "$output_file" "$input_file"
	if [ $? -eq 0 ]; then
		echo "Архив $input_file.zip успешно создан."
		rm -rf "$input_file" 
		openssl enc -aes-256-cbc -in "$output_file" -out "${output_file}.data"
		if [ $? -eq 0 ]; then
			echo "Архив $input_file.zip успешно зашифрован и сохранен как ${output_file}.data"
			rm "$output_file" 
		else
			echo "Ошибка при шифровании архива $input_file.zip."
			exit 1
		fi
	else
		echo "Ошибка при создании архива $input_file.zip."
		exit 1
	fi
fi
exit 0
```
После ввода кода сохраняем файл и выходим обратно в директорию ```bin ```
>Данная программа использует алгоритм добавления расширения ```.data```  для определения зашифрован ли файл или нет.

4. Для удобства использования меняем название:
```
sudo mv encryption.sh encryption
```
> Вы можете изменить название на любое вам удобное для использования в терминале

5. Изменяем состояние кода из скрипта в приложение:
```
sudo chmod +x encryption 
```
> Данную команду необходимо вводить после каждого изменения внутри файла
### Использование
После завершения установки наша программа полностью готова к использованию.
#### Шифрация файла
1. Открываем терминал и переходим в директорию где расположен файл/директория, который мы хотим зашифровать и вводим команду. 
```
encryption file_name.txt/jpg/pdf/etc #Название файли 
```
Команда для шифровании папки:
```
encryption folder_name
```
> Важно отметить что при шифровании директории НЕ указывайте ```/``` в конце названия папки.

2. Данный программа использует метод шифрования ```aes-256-cbc``` и после ввода команды выше требуется ввести пароль для шифрования, в целях безопасности проверяет его дважды.

3. Все, ваши файлы успешно зашифрованы 

#### Дешифрация файла
1. Открываем терминал и переходим в директорию где расположен зашифрованный файл/директория и вводим команду.
```
encryption file_name.zip.data
```
> Данная программа вначале архивирует файл/директорию перед шифрацией, поэтому после шифрации все файлы будут иметь расширение ```.zip.data```

2. Программа потребует ввести пароль для дешифрации 

3. Все, ваш файл/директория успешно разшифрованы

## Алгоритм работы
1. Код принимает в себя файл/директорию и проверяет на наличие расширения ```.data``` 
2. В случае наличия данного расширения программа реализует алгоритм расшифровки ```aes-256-cbc``` и разархивирует файл для дальнейшего просмотра удаляя все промежуточные файлы
3. В случае отсутствия расширения программа архивирует файл/директорию и далее шифрует его используя метод ```aes-256-cbc```
